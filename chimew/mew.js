!function(a){function e(a,b,c){d?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function f(a,b,c){d?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)}function g(){f(c,"DOMContentLoaded",g),f(b,"load",g),a.call(b,b,c,e)}var b=window,c=document,d="addEventListener"in document;"complete"===c.readyState?setTimeout(g):(e(c,"DOMContentLoaded",g),e(b,"load",g))}(function(a,b,c){function d(){}d.generate=function(){var a=d._gri,b=d._ha;return b(a(32),8)+"-"+b(a(16),4)+"-"+b(16384|a(12),4)+"-"+b(32768|a(14),4)+"-"+b(a(48),12)},d._gri=function(a){return 0>a?NaN:30>=a?0|Math.random()*(1<<a):53>=a?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<a-30)):NaN},d._ha=function(a,b){for(var c=a.toString(16),d=b-c.length,e="0";d>0;d>>>=1,e+=e)1&d&&(c=e+c);return c};var e=function(a,b){"use strict";var c=function(a){if("object"!=typeof a.document)throw new Error("Cookies.js requires a `window` with a `document` object");var c=function(a,b,d){return 1===arguments.length?c.get(a):c.set(a,b,d)};return c._document=a.document,c._cacheKeyPrefix="cookey.",c._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),c.defaults={path:"/",secure:!1},c.get=function(a){c._cachedDocumentCookie!==c._document.cookie&&c._renewCache();var d=c._cache[c._cacheKeyPrefix+a];return d===b?b:decodeURIComponent(d)},c.set=function(a,d,e){return e=c._getExtendedOptions(e),e.expires=c._getExpiresDate(d===b?-1:e.expires),c._document.cookie=c._generateCookieString(a,d,e),c},c.expire=function(a,d){return c.set(a,b,d)},c._getExtendedOptions=function(a){return{path:a&&a.path||c.defaults.path,domain:a&&a.domain||c.defaults.domain,expires:a&&a.expires||c.defaults.expires,secure:a&&a.secure!==b?a.secure:c.defaults.secure}},c._isValidDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)&&!isNaN(a.getTime())},c._getExpiresDate=function(a,b){if(b=b||new Date,"number"==typeof a?a=a===1/0?c._maxExpireDate:new Date(b.getTime()+1e3*a):"string"==typeof a&&(a=new Date(a)),a&&!c._isValidDate(a))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return a},c._generateCookieString=function(a,b,c){a=a.replace(/[^#$&+\^`|]/g,encodeURIComponent),a=a.replace(/\(/g,"%28").replace(/\)/g,"%29"),b=(b+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),c=c||{};var d=a+"="+b;return d+=c.path?";path="+c.path:"",d+=c.domain?";domain="+c.domain:"",d+=c.expires?";expires="+c.expires.toUTCString():"",d+=c.secure?";secure":""},c._getCacheFromString=function(a){for(var d={},e=a?a.split("; "):[],f=0;f<e.length;f++){var g=c._getKeyValuePairFromCookieString(e[f]);d[c._cacheKeyPrefix+g.key]===b&&(d[c._cacheKeyPrefix+g.key]=g.value)}return d},c._getKeyValuePairFromCookieString=function(a){var b=a.indexOf("=");b=0>b?a.length:b;var d,c=a.substr(0,b);try{d=decodeURIComponent(c)}catch(e){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+c+'"',e)}return{key:d,value:a.substr(b+1)}},c._renewCache=function(){c._cache=c._getCacheFromString(c._document.cookie),c._cachedDocumentCookie=c._document.cookie},c._areEnabled=function(){var a="cookies.js",b="1"===c.set(a,1).get(a);return c.expire(a),b},c.enabled=c._areEnabled(),c},d="object"==typeof a.document?c(a):c;return d}("undefined"==typeof a?this:a),f=function(){"use strict";function d(a){return'"'+a.replace(b,function(a){var b=c[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'}function e(a){return 10>a?"0"+a:a}function f(a,b){var c,g,h,i,j=b[a],k=typeof j;switch(j&&"object"==typeof j&&"function"==typeof j.toJSON&&(j=j.toJSON(a),k=typeof j),k){case"string":return d(j);case"number":return isFinite(j)?String(j):"null";case"boolean":return String(j);case"object":if(!j)return"null";switch(Object.prototype.toString.call(j)){case"[object Date]":return isFinite(j.valueOf())?'"'+j.getUTCFullYear()+"-"+e(j.getUTCMonth()+1)+"-"+e(j.getUTCDate())+"T"+e(j.getUTCHours())+":"+e(j.getUTCMinutes())+":"+e(j.getUTCSeconds())+'Z"':"null";case"[object Array]":for(h=j.length,i=[],c=0;h>c;c++)i.push(f(c,j)||"null");return"["+i.join(",")+"]";default:i=[];for(c in j)Object.prototype.hasOwnProperty.call(j,c)&&(g=f(c,j),g&&i.push(d(c)+":"+g));return"{"+i.join(",")+"}"}}}function g(b){return a.JSON&&a.JSON.stringify?a.JSON.stringify(b):f("",{"":b})}var b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return g}();Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return-1;var f=+b||0;if(Math.abs(f)===1/0&&(f=0),f>=e)return-1;for(c=Math.max(f>=0?f:e-Math.abs(f),0);e>c;){if(c in d&&d[c]===a)return c;c++}return-1}),function(){function g(){var a=e.get("log_uuid");return a||e.set("log_uuid",a=d.generate(),{domain:"chitu.com",expires:31536e3}),a}function h(a,b){var d,c=new RegExp("(^|&|\\?|#)"+a+"=([^&#]*)(&|$|#)","");return b=b||location.search,d=b.match(c),d?decodeURIComponent(d[2]):""}function k(b,c){var d=[{key:"pageName",value:c.pageName},{key:"url",value:location.href},{key:"userAgent",value:navigator.userAgent},{key:"uuid",value:g()}];c.id&&d.push({key:"id",value:c.pageName+"-"+c.id}),function(){for(var c,a=["_fr","channel"],b=0;b<a.length;b++)c=h(a[b]),c&&d.push({key:a[b],value:c})}(),function(){var g,h,k,e=new Image,l={uid:0,event_type:b,properties:d},m=i+"?log="+encodeURIComponent(f(l))+"&_="+(new Date).getTime();c.callback&&(g=!1,h=function(){g||(clearTimeout(k),g=!0,c.callback())},c.callbackTimeout&&(k=setTimeout(h,c.callbackTimeout)),e.onload=h,e.onerror=h),j?e.src=m:(a.console&&(console.log("\u975echitu\u57df\uff0c\u8c03\u8bd5\u72b6\u6001\uff0csendLog:"+m),console.log(l)),h&&h())}()}function m(a,b){var c={};if(b=b||{},c.id=b.id,c.callback=b.callback,c.pageName=b.pageName||l.pageName,c.callbackTimeout=b.callbackTimeout||l.callbackTimeout,c.id||(c.id=a&&a.getAttribute("data-log-id")),!c.id)throw new TypeError("\u9700\u8981\u624b\u52a8\u6307\u5b9a\u6216\u8005\u5728dom\u8282\u70b9\u4e0a\u4f7f\u7528`data-log-id`\u5c5e\u6027\u4e3a\u5143\u7d20\u6307\u5b9aid");return k("html_click",c),!0}var j,i=("https:"==b.location.protocol?"https:":"http:")+"//app.chitu.cn/log";/chitu\.com$/.test(b.domain)?j="chitu.com":/chitu\.cn$/.test(b.domain)&&(j="chitu.cn");var l={};!function(){function b(){var c,a=location.pathname.split("/"),b=a[1]||"home";return c=a[2]?a[2].replace(/\.html$/,""):"index",b+"_"+c}var c;a.___logConfig&&(l.pageName=a.___logConfig.pageName,l.callbackTimeout=a.___logConfig.callbackTimeout,c=a.___logConfig.pvCallback,a.___logConfig=void 0),l.pageName||(l.pageName=b()),l.callbackTimeout||(l.callbackTimeout=500),k("html_view",{pageName:l.pageName,callback:c,callbackTimeout:l.callbackTimeout})}(),c(b,"click",function(c){for(var f,d=c||a.event,e=d.target||d.srcElement;e!=b;){if(f=e.className.split(" "),f.indexOf("___log-click")>0){m(e);break}e=e.parentNode}}),function(){function a(a){var c,d,e,f;if("getElementsByClassName"in b)c=b.getElementsByClassName(a);else for(c=[],d=b.all?b.all:b.getElementsByTagName("*"),e=0;e<d.length;e++)if(f=d[e].className.split(" "),f.indexOf(a)>0){c.push(d[e]);break}return c}for(var f,d=a("___log-click--no-delegate"),e=0;e<d.length;e++)f=d[e],c(f,"click",function(){m(f)})}(),a.___manualAddClickLog=function(a,b){c(a,"click",function(){m(a,b)})},a.___manualSendClickLog=function(a){m(null,a)}}()});